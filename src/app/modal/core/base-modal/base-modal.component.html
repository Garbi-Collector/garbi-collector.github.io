<div class="modal-backdrop"
     [class.modal-animating]="isAnimating && config.animation"
     (click)="onBackdropClick($event)">

  <!-- Modal Window -->
  <div #modalWindow
       class="modal-window"
       [style]="getModalStyles()"
       [ngStyle]="getPositionStyles()"
       [class.modal-dragging]="isDragging"
       [class.modal-animating]="isAnimating && config.animation"
       (mousedown)="bringToFront()">

    <!-- Cyber Decorations -->
    <div class="cyber-frame">
      <!-- Corners -->
      <span class="corner corner-tl"></span>
      <span class="corner corner-tr"></span>
      <span class="corner corner-bl"></span>
      <span class="corner corner-br"></span>

      <!-- Edge Lines -->
      <div class="edge-line edge-top"></div>
      <div class="edge-line edge-right"></div>
      <div class="edge-line edge-bottom"></div>
      <div class="edge-line edge-left"></div>
    </div>

    <!-- Scan Lines Effect -->
    <div class="scan-lines" *ngIf="config.animation"></div>

    <!-- Modal Header (Draggable Area) -->
    <div class="modal-header"
         [class.draggable]="config.draggable"
         (mousedown)="onDragStart($event)">

      <div class="header-grip">
        <span class="grip-dot"></span>
        <span class="grip-dot"></span>
        <span class="grip-dot"></span>
        <span class="grip-dot"></span>
        <span class="grip-dot"></span>
        <span class="grip-dot"></span>
      </div>

      <!-- Close Button -->
      <button *ngIf="config.closeButton"
              class="close-button"
              (click)="close()"
              (mousedown)="preventDrag($event)"
              type="button"
              aria-label="Cerrar modal">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="button-glow"></div>
      </button>
    </div>

    <!-- Modal Content (Projected by Child) -->
    <div class="modal-content" (mousedown)="preventDrag($event)">
      <ng-content></ng-content>
    </div>

    <!-- Holographic Overlay -->
    <div class="hologram-overlay" *ngIf="isAnimating && config.animation"></div>
  </div>
</div>
