<section class="experience-section">
  <div class="container">

    <!-- Header -->
    <div class="section-header">
      <h1 class="section-title">
        <span class="title-bracket">&lt;</span>
        <span class="text-gradient">Experiencia</span>
        <span class="title-bracket">/&gt;</span>
      </h1>
      <div class="title-line"></div>
    </div>

    <!-- View Switcher (Cyberpunk Toggle) -->
    <div class="view-switcher">
      <div class="switcher-container">
        <div class="switcher-background"
             [class.right]="currentView === 'education'">
        </div>

        <button
          class="switcher-option"
          [class.active]="currentView === 'experience'"
          (click)="switchView('experience')">
          <span class="option-icon">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="2" y="7" width="20" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
              <path d="M16 7V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2" stroke="currentColor" stroke-width="2"/>
              <line x1="2" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="2"/>
            </svg>
          </span>
          <span class="option-text">Experiencias</span>
          <div class="option-glow"></div>
        </button>

        <button
          class="switcher-option"
          [class.active]="currentView === 'education'"
          (click)="switchView('education')">
          <span class="option-icon">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M22 10v6M2 10l10-5 10 5-10 5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M6 12v5c0 1.5 4 3 6 3s6-1.5 6-3v-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
          <span class="option-text">Educaci√≥n</span>
          <div class="option-glow"></div>
        </button>

        <!-- Corner decorations -->
        <span class="corner corner-tl"></span>
        <span class="corner corner-tr"></span>
        <span class="corner corner-bl"></span>
        <span class="corner corner-br"></span>
      </div>
    </div>

    <!-- Content Area -->
    <div class="content-area">

      <!-- Experience Cards -->
      <div class="cards-grid" *ngIf="currentView === 'experience'">
        <div
          *ngFor="let exp of experiences; let i = index"
          class="experience-card"
          [style.animation-delay]="(i * 0.1) + 's'">

          <div class="card-inner">
            <!-- Company Logo -->
            <div class="card-logo">
              <div class="logo-frame">
                <img [src]="exp.logo" [alt]="exp.company + ' logo'"
                     onerror="this.src='assets/logos/default-company.png'">
                <div class="logo-glow"></div>
              </div>
            </div>

            <!-- Card Header -->
            <div class="card-header">
              <h3 class="company-name">{{ exp.company }}</h3>
              <p class="position">{{ exp.position }}</p>
            </div>

            <!-- Date Range -->
            <div class="date-range">
              <svg class="date-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
              </svg>
              <span class="date-text">{{ exp.startDate }} - {{ exp.endDate }}</span>
            </div>

            <!-- Technologies -->
            <div class="technologies">
              <span class="tech-label">
                <span class="slash">//</span>
                Stack:
              </span>
              <div class="tech-tags">
                <span
                  *ngFor="let tech of exp.technologies"
                  class="tech-tag"
                  [class]="'tech-' + tech.color">
                  {{ tech.name }}
                </span>
              </div>
            </div>

            <!-- Short Description -->
            <p class="short-description">
              {{ exp.shortDescription }}
            </p>

            <!-- View Details Button -->
            <button class="view-details-btn" (click)="openExperienceDetail(exp)">
              <span class="btn-content">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                  <path d="M12 16v-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <circle cx="12" cy="8" r="1" fill="currentColor"/>
                </svg>
                Ver Detalles
              </span>
              <div class="btn-glow"></div>
            </button>

            <!-- Card Decorations -->
            <div class="card-corner corner-tl"></div>
            <div class="card-corner corner-tr"></div>
            <div class="card-corner corner-bl"></div>
            <div class="card-corner corner-br"></div>
          </div>
        </div>
      </div>

      <!-- Education Cards -->
      <div class="cards-grid" *ngIf="currentView === 'education'">
        <div
          *ngFor="let edu of educations; let i = index"
          class="education-card"
          [style.animation-delay]="(i * 0.1) + 's'">

          <div class="card-inner">
            <!-- Institution Logo -->
            <div class="card-logo">
              <div class="logo-frame">
                <img [src]="edu.logo" [alt]="edu.institution + ' logo'"
                     onerror="this.src='assets/logos/default-institution.png'">
                <div class="logo-glow"></div>
              </div>
            </div>

            <!-- Status Badge -->
            <div class="status-badge" [class.completed]="edu.status === 'completed'">
              <svg *ngIf="edu.status === 'completed'" class="badge-icon" viewBox="0 0 24 24" fill="none">
                <polyline points="20 6 9 17 4 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <svg *ngIf="edu.status === 'in-progress'" class="badge-icon" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <polyline points="12 6 12 12 16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span class="badge-text">
                {{ edu.status === 'completed' ? 'Finalizado' : 'En Curso' }}
              </span>
            </div>

            <!-- Card Header -->
            <div class="card-header">
              <h3 class="institution-name">{{ edu.institution }}</h3>
              <p class="edu-title">{{ edu.title }}</p>
            </div>

            <!-- Date Range -->
            <div class="date-range">
              <svg class="date-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
              </svg>
              <span class="date-text">{{ edu.startDate }} - {{ edu.endDate }}</span>
            </div>

            <!-- View Details Button -->
            <button class="view-details-btn" (click)="openEducationDetail(edu)">
              <span class="btn-content">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                  <path d="M12 16v-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <circle cx="12" cy="8" r="1" fill="currentColor"/>
                </svg>
                Ver Detalles
              </span>
              <div class="btn-glow"></div>
            </button>

            <!-- Card Decorations -->
            <div class="card-corner corner-tl"></div>
            <div class="card-corner corner-tr"></div>
            <div class="card-corner corner-bl"></div>
            <div class="card-corner corner-br"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
